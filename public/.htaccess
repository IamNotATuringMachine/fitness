# Cache Control for GitHub Pages
# Force browsers to check for updates

# HTML files - no cache
<FilesMatch "\.(html|htm)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
</FilesMatch>

# JavaScript and CSS files - short cache with validation
<FilesMatch "\.(js|css)$">
    Header set Cache-Control "public, max-age=300, must-revalidate"
</FilesMatch>

# Service Worker - never cache
<FilesMatch "sw\.js$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
</FilesMatch>

# Manifest file - short cache
<FilesMatch "manifest\.json$">
    Header set Cache-Control "public, max-age=300"
</FilesMatch>

# Images and fonts - longer cache but with validation
<FilesMatch "\.(png|jpg|jpeg|gif|svg|woff|woff2|ttf|eot)$">
    Header set Cache-Control "public, max-age=3600, must-revalidate"
</FilesMatch>

# Force HTTPS redirect
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Handle client-side routing for React
RewriteEngine On
RewriteBase /fitness/
RewriteRule ^index\.html$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /fitness/index.html [L] 